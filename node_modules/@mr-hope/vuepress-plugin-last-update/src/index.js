"use strict";
const time_1 = require("./time");
const moment = require("moment");
const defaultTransformer = (timestamp, lang) => {
    moment.locale(lang);
    return `${moment(timestamp).format("LL")} ${moment(timestamp).format("HH:mm")}`;
};
module.exports = (options) => ({
    name: "last-updated",
    extendPageData($page) {
        const { transformer } = options;
        const timestamp = time_1.default($page._filePath);
        const { $lang } = $page._computed;
        if (timestamp) {
            const lastUpdated = typeof transformer === "function"
                ? transformer(timestamp, $lang)
                : defaultTransformer(timestamp, $lang);
            $page.lastUpdated = lastUpdated;
            $page.lastUpdatedTime = timestamp;
        }
    },
});
