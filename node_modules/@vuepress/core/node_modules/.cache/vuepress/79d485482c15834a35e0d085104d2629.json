{"remainingRequest":"E:\\myself\\githubPage\\HalfLeaf.github.io\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\myself\\githubPage\\HalfLeaf.github.io\\node_modules\\vuepress-plugin-md-enhance\\src\\FlowChart.vue?vue&type=script&lang=ts&","dependencies":[{"path":"E:\\myself\\githubPage\\HalfLeaf.github.io\\node_modules\\vuepress-plugin-md-enhance\\src\\FlowChart.vue","mtime":499162500000},{"path":"E:\\myself\\githubPage\\HalfLeaf.github.io\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1592788438647},{"path":"E:\\myself\\githubPage\\HalfLeaf.github.io\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"E:\\myself\\githubPage\\HalfLeaf.github.io\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1592788438647},{"path":"E:\\myself\\githubPage\\HalfLeaf.github.io\\node_modules\\vue-loader\\lib\\index.js","mtime":1592788498951}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCmltcG9ydCB7IENvbXBvbmVudCwgUHJvcCwgVnVlIH0gZnJvbSAidnVlLXByb3BlcnR5LWRlY29yYXRvciI7CmltcG9ydCBMb2FkaW5nIGZyb20gIkBtci1ob3BlL3Z1ZXByZXNzLXNoYXJlZC11dGlscy9pY29ucy9Mb2FkaW5nSWNvbi52dWUiOwppbXBvcnQgZGVib3VuY2UgPSByZXF1aXJlKCJsb2Rhc2guZGVib3VuY2UiKTsKaW1wb3J0IHByZXNldHMgZnJvbSAiLi9wcmVzZXRzIjsKCmxldCBzdmc6IGFueTsKCkBDb21wb25lbnQoeyBjb21wb25lbnRzOiB7IExvYWRpbmcgfSB9KQpleHBvcnQgZGVmYXVsdCBjbGFzcyBGbG93Q2hhcnQgZXh0ZW5kcyBWdWUgewogIEBQcm9wKHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9KQogIHByaXZhdGUgcmVhZG9ubHkgaWQhOiBzdHJpbmc7CgogIEBQcm9wKHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9KQogIHByaXZhdGUgcmVhZG9ubHkgY29kZSE6IHN0cmluZzsKCiAgQFByb3AoeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICJ2dWUiIH0pCiAgcHJpdmF0ZSByZWFkb25seSBwcmVzZXQhOiAiYW50IiB8ICJ2dWUiOwoKICBwcml2YXRlIGxvYWRpbmcgPSB0cnVlOwoKICBwcml2YXRlIHNjYWxlID0gMTsKCiAgcHJpdmF0ZSBnZXQgJHByZXNldCgpIHsKICAgIGNvbnN0IHByZXNldCA9IHByZXNldHNbdGhpcy5wcmVzZXRdOwoKICAgIGlmICghcHJlc2V0KSB7CiAgICAgIGNvbnNvbGUud2FybihgW21kLWVuaGFuY2U6Zmxvd2NoYXJ0XSBVbmtub3duIHByZXNldDogJHt0aGlzLnByZXNldH1gKTsKICAgICAgcmV0dXJuIHByZXNldHMudnVlOwogICAgfQoKICAgIHJldHVybiBwcmVzZXQ7CiAgfQoKICBwcml2YXRlIGdldCByZXNpemUoKSB7CiAgICByZXR1cm4gZGVib3VuY2UoKCkgPT4gewogICAgICBjb25zdCBzY2FsZSA9IHRoaXMuZ2V0U2NhbGUod2luZG93LmlubmVyV2lkdGgpOwoKICAgICAgaWYgKHRoaXMuc2NhbGUgIT09IHNjYWxlKSB7CiAgICAgICAgdGhpcy5zY2FsZSA9IHNjYWxlOwogICAgICAgIHN2Zy5kcmF3U1ZHKHRoaXMuaWQsIHsgLi4udGhpcy4kcHJlc2V0LCBzY2FsZSB9KTsKICAgICAgfQogICAgfSwgMTAwKTsKICB9CgogIHByaXZhdGUgbW91bnRlZCgpIHsKICAgIGNvbnN0IGRlbGF5ID0gKCkgPT4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTAwKSk7CgogICAgdGhpcy4kZWwuc2V0QXR0cmlidXRlKCJpZCIsIHRoaXMuaWQpOwoKICAgIFByb21pc2UuYWxsKFsKICAgICAgaW1wb3J0KC8qIHdlYnBhY2tDaHVua05hbWU6ICJmbG93Y2hhcnQiICovICJmbG93Y2hhcnQuanMiKSwKICAgICAgZGVsYXkoKSwKICAgIF0pLnRoZW4oKFtmbG93Y2hhcnRdKSA9PiB7CiAgICAgIGNvbnN0IHsgcGFyc2UgfSA9IGZsb3djaGFydDsKCiAgICAgIHN2ZyA9IHBhcnNlKHRoaXMuY29kZSk7CiAgICAgIHRoaXMuc2NhbGUgPSB0aGlzLmdldFNjYWxlKHdpbmRvdy5pbm5lcldpZHRoKTsKCiAgICAgIHN2Zy5kcmF3U1ZHKHRoaXMuaWQsIHsgLi4udGhpcy4kcHJlc2V0LCBzY2FsZTogdGhpcy5zY2FsZSB9KTsKICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CgogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgdGhpcy5yZXNpemUpOwogICAgfSk7CiAgfQoKICBwcml2YXRlIGJlZm9yZURlc3RvcnkoKSB7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgdGhpcy5yZXNpemUpOwogIH0KCiAgcHJpdmF0ZSBnZXRTY2FsZSh3aWR0aDogbnVtYmVyKSB7CiAgICByZXR1cm4gd2lkdGggPCA0MTkgPyAwLjggOiB3aWR0aCA+IDEyODAgPyAxIDogMC45OwogIH0KfQo="},{"version":3,"sources":["FlowChart.vue"],"names":[],"mappings":";;;;;;;AAOA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"FlowChart.vue","sourceRoot":"node_modules/vuepress-plugin-md-enhance/src","sourcesContent":["<template>\n  <div :class=\"{ 'loading': loading }\" class=\"md-flowchart\">\n    <Loading v-if=\"loading\" class=\"md-flowchart-loading-icon\" />\n  </div>\n</template>\n\n<script lang='ts'>\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport Loading from \"@mr-hope/vuepress-shared-utils/icons/LoadingIcon.vue\";\nimport debounce = require(\"lodash.debounce\");\nimport presets from \"./presets\";\n\nlet svg: any;\n\n@Component({ components: { Loading } })\nexport default class FlowChart extends Vue {\n  @Prop({ type: String, required: true })\n  private readonly id!: string;\n\n  @Prop({ type: String, required: true })\n  private readonly code!: string;\n\n  @Prop({ type: String, default: \"vue\" })\n  private readonly preset!: \"ant\" | \"vue\";\n\n  private loading = true;\n\n  private scale = 1;\n\n  private get $preset() {\n    const preset = presets[this.preset];\n\n    if (!preset) {\n      console.warn(`[md-enhance:flowchart] Unknown preset: ${this.preset}`);\n      return presets.vue;\n    }\n\n    return preset;\n  }\n\n  private get resize() {\n    return debounce(() => {\n      const scale = this.getScale(window.innerWidth);\n\n      if (this.scale !== scale) {\n        this.scale = scale;\n        svg.drawSVG(this.id, { ...this.$preset, scale });\n      }\n    }, 100);\n  }\n\n  private mounted() {\n    const delay = () => new Promise((resolve) => setTimeout(resolve, 500));\n\n    this.$el.setAttribute(\"id\", this.id);\n\n    Promise.all([\n      import(/* webpackChunkName: \"flowchart\" */ \"flowchart.js\"),\n      delay(),\n    ]).then(([flowchart]) => {\n      const { parse } = flowchart;\n\n      svg = parse(this.code);\n      this.scale = this.getScale(window.innerWidth);\n\n      svg.drawSVG(this.id, { ...this.$preset, scale: this.scale });\n      this.loading = false;\n\n      window.addEventListener(\"resize\", this.resize);\n    });\n  }\n\n  private beforeDestory() {\n    window.removeEventListener(\"resize\", this.resize);\n  }\n\n  private getScale(width: number) {\n    return width < 419 ? 0.8 : width > 1280 ? 1 : 0.9;\n  }\n}\n</script>\n\n<style lang=\"stylus\">\n.md-flowchart\n  overflow-x scroll\n  text-align center\n  transition all 1s\n  padding 0.6em 0.4em\n\n  &.loading\n    display flex\n    justify-content center\n    align-items center\n    background-color var(--grey15, #eee)\n\n  @media (max-width: $MQMobileNarrow)\n    margin 0 -1.5rem\n    padding 0.6em 0\n\n  svg.md-flowchart-loading-icon\n    width 2.5em\n    height 2.5em\n    margin 2.5em auto\n    fill var(--accent-color, $accentColor)\n\n.operation-element, .parallel-element\n  rx 5px\n  ry 5px\n</style>\n"]}]}