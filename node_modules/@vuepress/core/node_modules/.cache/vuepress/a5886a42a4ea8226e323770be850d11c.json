{"remainingRequest":"E:\\myself\\githubPage\\HalfLeaf.github.io\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\myself\\githubPage\\HalfLeaf.github.io\\node_modules\\@mr-hope\\vuepress-plugin-comment\\src\\VisitorInfo.vue?vue&type=script&lang=ts&","dependencies":[{"path":"E:\\myself\\githubPage\\HalfLeaf.github.io\\node_modules\\@mr-hope\\vuepress-plugin-comment\\src\\VisitorInfo.vue","mtime":499162500000},{"path":"E:\\myself\\githubPage\\HalfLeaf.github.io\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1592788438647},{"path":"E:\\myself\\githubPage\\HalfLeaf.github.io\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"E:\\myself\\githubPage\\HalfLeaf.github.io\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1592788438647},{"path":"E:\\myself\\githubPage\\HalfLeaf.github.io\\node_modules\\vue-loader\\lib\\index.js","mtime":1592788498951}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgovKiBnbG9iYWwgQ09NTUVOVF9PUFRJT05TICovCmltcG9ydCB7IENvbXBvbmVudCwgVnVlLCBXYXRjaCB9IGZyb20gInZ1ZS1wcm9wZXJ0eS1kZWNvcmF0b3IiOwppbXBvcnQgRXllSWNvbiBmcm9tICJAbXItaG9wZS92dWVwcmVzcy1zaGFyZWQtdXRpbHMvaWNvbnMvRXllSWNvbi52dWUiOwppbXBvcnQgRmlyZUljb24gZnJvbSAiQG1yLWhvcGUvdnVlcHJlc3Mtc2hhcmVkLXV0aWxzL2ljb25zL0ZpcmVJY29uLnZ1ZSI7CmltcG9ydCB7IFJvdXRlIH0gZnJvbSAidnVlLXJvdXRlciI7CmltcG9ydCB7IFZhbGluZU9wdGlvbnMgfSBmcm9tICIuLi90eXBlcyI7CmltcG9ydCB7IGkxOG4gfSBmcm9tICJAbXItaG9wZS92dWVwcmVzcy1zaGFyZWQtdXRpbHMiOwoKQENvbXBvbmVudCh7IGNvbXBvbmVudHM6IHsgRXllSWNvbiwgRmlyZUljb24gfSB9KQpleHBvcnQgZGVmYXVsdCBjbGFzcyBWaXNpdG9ySW5mbyBleHRlbmRzIFZ1ZSB7CiAgcHJpdmF0ZSB2YWxpbmVDb25maWcgPSBDT01NRU5UX09QVElPTlMgYXMgVmFsaW5lT3B0aW9uczsKCiAgcHJpdmF0ZSBjb3VudCA9IDA7CgogIHByaXZhdGUgZ2V0IHZhbGluZUVuYWJsZSgpOiBib29sZWFuIHsKICAgIGNvbnN0IHsgdmFsaW5lQ29uZmlnIH0gPSB0aGlzOwoKICAgIHJldHVybiBCb29sZWFuKAogICAgICB2YWxpbmVDb25maWcgJiYKICAgICAgICB2YWxpbmVDb25maWcudHlwZSA9PT0gInZhbGluZSIgJiYKICAgICAgICB2YWxpbmVDb25maWcuYXBwSWQgJiYKICAgICAgICB2YWxpbmVDb25maWcuYXBwS2V5CiAgICApOwogIH0KCiAgLyoqIFdoZXRoZXIgZW5hYmxlIHBhZ2UgdmlldyBkaXNwbGF5ICovCiAgcHJpdmF0ZSBnZXQgZW5hYmxlVmlzaXRvcigpOiBib29sZWFuIHsKICAgIGlmICghdGhpcy52YWxpbmVFbmFibGUpIHJldHVybiBmYWxzZTsKICAgIGNvbnN0IGdsb2JhbEVuYWJsZSA9IHRoaXMudmFsaW5lQ29uZmlnLnZpc2l0b3IgIT09IGZhbHNlOwogICAgY29uc3QgcGFnZUNvbmZpZyA9IHRoaXMuJGZyb250bWF0dGVyLnZpc2l0b3I7CgogICAgcmV0dXJuIChnbG9iYWxFbmFibGUgJiYgcGFnZUNvbmZpZyAhPT0gZmFsc2UpIHx8IHBhZ2VDb25maWcgPT09IHRydWU7CiAgfQoKICAvKiogdmlzaXRvcklELCB1c2UgY3VycmVudCBwYXRoICovCiAgcHJpdmF0ZSBnZXQgdmlzaXRvcklEKCkgewogICAgY29uc3QgeyBiYXNlIH0gPSB0aGlzLiRzaXRlOwoKICAgIHJldHVybiBiYXNlCiAgICAgID8gYCR7YmFzZS5zbGljZSgwLCBiYXNlLmxlbmd0aCAtIDEpfSR7dGhpcy4kcGFnZS5wYXRofWAKICAgICAgOiB0aGlzLiRwYWdlLnBhdGg7CiAgfQoKICBwcml2YXRlIGdldCBoaW50KCk6IHN0cmluZyB7CiAgICByZXR1cm4gKHRoaXMuJHRoZW1lTG9jYWxlQ29uZmlnLmJsb2cgfHwgaTE4bi5nZXREZWZhdWx0TG9jYWxlKCkuYmxvZykKICAgICAgLnZpZXdzOwogIH0KCiAgcHJpdmF0ZSBtb3VudGVkKCkgewogICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIHRoaXMuZ2V0Q291bnQoKTsKICAgIH0sIDE1MDApOwogIH0KCiAgLy8gc2hvdyBmaXJlIGljb24gZGVwZW5kaW5nIG9uIHRoZSB2aWV3cyBudW1iZXIKICBwcml2YXRlIGdldENvdW50KCkgewogICAgY29uc3QgY291bnRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigKICAgICAgIi5sZWFuY2xvdWRfdmlzaXRvcnMgLmxlYW5jbG91ZC12aXNpdG9ycy1jb3VudCIKICAgICk7CgogICAgaWYgKGNvdW50RWxlbWVudCkgewogICAgICBjb25zdCBjb3VudCA9IGNvdW50RWxlbWVudC50ZXh0Q29udGVudDsKCiAgICAgIGlmIChjb3VudCAmJiAhaXNOYU4oTnVtYmVyKGNvdW50KSkpIHRoaXMuY291bnQgPSBOdW1iZXIoY291bnQpOwogICAgfSBlbHNlCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHRoaXMuZ2V0Q291bnQoKTsKICAgICAgfSwgNTAwKTsKICB9CgogIEBXYXRjaCgiJHJvdXRlIikKICBvblJvdXRlQ2hhbmdlKHRvOiBSb3V0ZSwgZnJvbTogUm91dGUpIHsKICAgIGlmICh0by5wYXRoICE9PSBmcm9tLnBhdGgpCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHRoaXMuZ2V0Q291bnQoKTsKICAgICAgfSwgNTAwKTsKICB9Cn0K"},{"version":3,"sources":["VisitorInfo.vue"],"names":[],"mappings":";;;;;;;;;;;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VisitorInfo.vue","sourceRoot":"node_modules/@mr-hope/vuepress-plugin-comment/src","sourcesContent":["<template>\n  <span class=\"visitor-info\" :title=\"hint\">\n    <EyeIcon v-if=\"count < 1000\" />\n    <FireIcon v-else />\n    <span :id=\"visitorID\" :data-flag-title=\"$page.title\" class=\"leancloud_visitors\">\n      <span class=\"leancloud-visitors-count\">...</span>\n    </span>\n  </span>\n</template>\n\n<script lang=\"ts\">\n/* global COMMENT_OPTIONS */\nimport { Component, Vue, Watch } from \"vue-property-decorator\";\nimport EyeIcon from \"@mr-hope/vuepress-shared-utils/icons/EyeIcon.vue\";\nimport FireIcon from \"@mr-hope/vuepress-shared-utils/icons/FireIcon.vue\";\nimport { Route } from \"vue-router\";\nimport { ValineOptions } from \"../types\";\nimport { i18n } from \"@mr-hope/vuepress-shared-utils\";\n\n@Component({ components: { EyeIcon, FireIcon } })\nexport default class VisitorInfo extends Vue {\n  private valineConfig = COMMENT_OPTIONS as ValineOptions;\n\n  private count = 0;\n\n  private get valineEnable(): boolean {\n    const { valineConfig } = this;\n\n    return Boolean(\n      valineConfig &&\n        valineConfig.type === \"valine\" &&\n        valineConfig.appId &&\n        valineConfig.appKey\n    );\n  }\n\n  /** Whether enable page view display */\n  private get enableVisitor(): boolean {\n    if (!this.valineEnable) return false;\n    const globalEnable = this.valineConfig.visitor !== false;\n    const pageConfig = this.$frontmatter.visitor;\n\n    return (globalEnable && pageConfig !== false) || pageConfig === true;\n  }\n\n  /** visitorID, use current path */\n  private get visitorID() {\n    const { base } = this.$site;\n\n    return base\n      ? `${base.slice(0, base.length - 1)}${this.$page.path}`\n      : this.$page.path;\n  }\n\n  private get hint(): string {\n    return (this.$themeLocaleConfig.blog || i18n.getDefaultLocale().blog)\n      .views;\n  }\n\n  private mounted() {\n    setTimeout(() => {\n      this.getCount();\n    }, 1500);\n  }\n\n  // show fire icon depending on the views number\n  private getCount() {\n    const countElement = document.querySelector(\n      \".leancloud_visitors .leancloud-visitors-count\"\n    );\n\n    if (countElement) {\n      const count = countElement.textContent;\n\n      if (count && !isNaN(Number(count))) this.count = Number(count);\n    } else\n      setTimeout(() => {\n        this.getCount();\n      }, 500);\n  }\n\n  @Watch(\"$route\")\n  onRouteChange(to: Route, from: Route) {\n    if (to.path !== from.path)\n      setTimeout(() => {\n        this.getCount();\n      }, 500);\n  }\n}\n</script>\n"]}]}