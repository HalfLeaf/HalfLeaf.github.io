{"remainingRequest":"E:\\myself\\githubPage\\HalfLeaf.github.io\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\myself\\githubPage\\HalfLeaf.github.io\\node_modules\\vuepress-theme-hope\\components\\DarkmodeSwitch.vue?vue&type=script&lang=ts&","dependencies":[{"path":"E:\\myself\\githubPage\\HalfLeaf.github.io\\node_modules\\vuepress-theme-hope\\components\\DarkmodeSwitch.vue","mtime":499162500000},{"path":"E:\\myself\\githubPage\\HalfLeaf.github.io\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1592788438647},{"path":"E:\\myself\\githubPage\\HalfLeaf.github.io\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"E:\\myself\\githubPage\\HalfLeaf.github.io\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1592788438647},{"path":"E:\\myself\\githubPage\\HalfLeaf.github.io\\node_modules\\vue-loader\\lib\\index.js","mtime":1592788498951}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbXBvcnQgeyBDb21wb25lbnQsIFByb3AsIFZ1ZSB9IGZyb20gInZ1ZS1wcm9wZXJ0eS1kZWNvcmF0b3IiOwppbXBvcnQgQXV0b0ljb24gZnJvbSAiQG1yLWhvcGUvdnVlcHJlc3Mtc2hhcmVkLXV0aWxzL2ljb25zL0F1dG9JY29uLnZ1ZSI7CmltcG9ydCBEYXJrSWNvbiBmcm9tICJAbXItaG9wZS92dWVwcmVzcy1zaGFyZWQtdXRpbHMvaWNvbnMvRGFya0ljb24udnVlIjsKaW1wb3J0IExpZ2h0SWNvbiBmcm9tICJAbXItaG9wZS92dWVwcmVzcy1zaGFyZWQtdXRpbHMvaWNvbnMvTGlnaHRJY29uLnZ1ZSI7CmltcG9ydCB7IGRvbSB9IGZyb20gIkBtci1ob3BlL3Z1ZXByZXNzLXNoYXJlZC11dGlscyI7Cgpjb25zdCBjaGFuZ2VDbGFzcyA9IChkb21DbGFzczogRE9NVG9rZW5MaXN0LCBpbnNlcnQ6IHN0cmluZ1tdLCByZW1vdmU6IHN0cmluZ1tdKSA9PiB7CiAgZG9tQ2xhc3MucmVtb3ZlKC4uLnJlbW92ZSk7CiAgY29uc3Qgb2xkQ2xhc3NlcyA9IEFycmF5LmZyb20oZG9tQ2xhc3MpOwogIGRvbUNsYXNzLnZhbHVlID0gIiI7CiAgZG9tQ2xhc3MuYWRkKC4uLmluc2VydCwgLi4ub2xkQ2xhc3Nlcyk7Cn07CgpAQ29tcG9uZW50KHsgY29tcG9uZW50czogeyBBdXRvSWNvbiwgRGFya0ljb24sIExpZ2h0SWNvbiB9IH0pCmV4cG9ydCBkZWZhdWx0IGNsYXNzIERhcmttb2RlU3dpdGNoIGV4dGVuZHMgVnVlIHsKICBwcml2YXRlIGRhcmttb2RlOiAiYXV0byIgfCAib24iIHwgIm9mZiIgPSAiYXV0byI7CgogIC8qKiBkYXJrbW9kZSBzdGF0dXMgKi8KICBwcml2YXRlIGdldCBkYXJrbW9kZUNvbmZpZygpIHsKICAgIHJldHVybiB0aGlzLiR0aGVtZUNvbmZpZy5kYXJrbW9kZSB8fCAiYXV0by1zd2l0Y2giOwogIH0KCiAgcHJpdmF0ZSBtb3VudGVkKCkgewogICAgLyoqIOiOt+W+l+exu+WIl+ihqCAqLwogICAgY29uc3QgY2xhc3NlcyA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0OwogICAgLyoqIOa3seiJsuaooeW8jyAqLwogICAgdGhpcy5kYXJrbW9kZSA9CiAgICAgIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiZGFya21vZGUiKSBhcyAiYXV0byIgfCAib24iIHwgIm9mZiIgfCBudWxsKSB8fAogICAgICAiYXV0byI7CgogICAgaWYgKHRoaXMuZGFya21vZGVDb25maWcgPT09ICJhdXRvLXN3aXRjaCIpCiAgICAgIGlmICh0aGlzLmRhcmttb2RlID09PSAiYXV0byIpIHRoaXMuc2V0RGFya21vZGUoImF1dG8iKTsKICAgICAgZWxzZSB0aGlzLnNldERhcmttb2RlKHRoaXMuZGFya21vZGUpOwogICAgLy8g6Ieq5Yqo5qih5byPCiAgICBlbHNlIGlmICh0aGlzLmRhcmttb2RlQ29uZmlnID09PSAiYXV0byIpIHRoaXMuc2V0RGFya21vZGUoImF1dG8iKTsKICAgIC8vIOWIh+aNouaooeW8jwogICAgZWxzZSBpZiAodGhpcy5kYXJrbW9kZUNvbmZpZyA9PT0gInN3aXRjaCIpIHRoaXMuc2V0RGFya21vZGUodGhpcy5kYXJrbW9kZSk7CiAgICAvLyDooqvnpoHnlKgKICAgIGVsc2UgdGhpcy5zZXREYXJrbW9kZSgib2ZmIik7CiAgfQoKICAvKiog6K6+572u5aSc6Ze05qih5byPICovCiAgc2V0RGFya21vZGUoc3RhdHVzOiAib24iIHwgIm9mZiIgfCAiYXV0byIpIHsKICAgIGlmIChzdGF0dXMgPT09ICJvbiIpIHRoaXMudG9nZ2xlRGFya21vZGUodHJ1ZSk7CiAgICBlbHNlIGlmIChzdGF0dXMgPT09ICJvZmYiKSB0aGlzLnRvZ2dsZURhcmttb2RlKGZhbHNlKTsKICAgIGVsc2UgewogICAgICBjb25zdCBpc0RhcmtNb2RlID0gd2luZG93Lm1hdGNoTWVkaWEoIihwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyaykiKQogICAgICAgIC5tYXRjaGVzOwogICAgICBjb25zdCBpc0xpZ2h0TW9kZSA9IHdpbmRvdy5tYXRjaE1lZGlhKCIocHJlZmVycy1jb2xvci1zY2hlbWU6IGxpZ2h0KSIpCiAgICAgICAgLm1hdGNoZXM7CgogICAgICB3aW5kb3cubWF0Y2hNZWRpYSgiKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKSIpLmFkZExpc3RlbmVyKChldmVudCkgPT4gewogICAgICAgIGlmIChldmVudC5tYXRjaGVzKSB0aGlzLnRvZ2dsZURhcmttb2RlKHRydWUpOwogICAgICB9KTsKCiAgICAgIHdpbmRvdwogICAgICAgIC5tYXRjaE1lZGlhKCIocHJlZmVycy1jb2xvci1zY2hlbWU6IGxpZ2h0KSIpCiAgICAgICAgLmFkZExpc3RlbmVyKChldmVudCkgPT4gewogICAgICAgICAgaWYgKGV2ZW50Lm1hdGNoZXMpIHRoaXMudG9nZ2xlRGFya21vZGUoZmFsc2UpOwogICAgICAgIH0pOwoKICAgICAgaWYgKGlzRGFya01vZGUpIHRoaXMudG9nZ2xlRGFya21vZGUodHJ1ZSk7CiAgICAgIGVsc2UgaWYgKGlzTGlnaHRNb2RlKSB0aGlzLnRvZ2dsZURhcmttb2RlKGZhbHNlKTsKICAgICAgZWxzZSB7CiAgICAgICAgY29uc3QgdGltZUhvdXIgPSBuZXcgRGF0ZSgpLmdldEhvdXJzKCk7CgogICAgICAgIHRoaXMudG9nZ2xlRGFya21vZGUodGltZUhvdXIgPCA2IHx8IHRpbWVIb3VyID49IDE4KTsKICAgICAgfQogICAgfQoKICAgIHRoaXMuZGFya21vZGUgPSBzdGF0dXM7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiZGFya21vZGUiLCBzdGF0dXMpOwogIH0KCiAgLyoqIOWIh+aNoua3seiJsuaooeW8jyAqLwogIHByaXZhdGUgdG9nZ2xlRGFya21vZGUoaXNEYXJrbW9kZTogYm9vbGVhbikgewogICAgY29uc3QgY2xhc3NlcyA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0OwoKICAgIGlmIChpc0Rhcmttb2RlKSBjaGFuZ2VDbGFzcyhjbGFzc2VzLCBbInRoZW1lLWRhcmsiXSwgWyJ0aGVtZS1saWdodCJdKTsKICAgIGVsc2UgY2hhbmdlQ2xhc3MoY2xhc3NlcywgWyJ0aGVtZS1saWdodCJdLCBbInRoZW1lLWRhcmsiXSk7CiAgfQp9Cg=="},{"version":3,"sources":["DarkmodeSwitch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"DarkmodeSwitch.vue","sourceRoot":"node_modules/vuepress-theme-hope/components","sourcesContent":["<template>\n  <div class=\"darkmode-switch\">\n    <template v-if=\"darkmodeConfig === 'auto-switch'\">\n      <div class=\"item day\" :class=\"{ active: darkmode === 'off' }\" @click=\"setDarkmode('off')\">\n        <LightIcon />\n      </div>\n      <div class=\"item auto\" :class=\"{ active: darkmode === 'auto' }\" @click=\"setDarkmode('auto')\">\n        <AutoIcon />\n      </div>\n      <div class=\"item night\" :class=\"{ active: darkmode === 'on' }\" @click=\"setDarkmode('on')\">\n        <DarkIcon />\n      </div>\n    </template>\n    <div v-else-if=\"darkmodeConfig==='switch'\" class=\"switch\">\n      <input\n        id=\"switch\"\n        class=\"switch-input\"\n        type=\"checkbox\"\n        :checked=\"darkmode !== 'on'\"\n        @click=\"setDarkmode(darkmode === 'on'?'off':'on')\"\n      />\n      <label class=\"label\" for=\"switch\">\n        <span class=\"label-content\" />\n      </label>\n    </div>\n  </div>\n</template>\n\n<script lang='ts'>\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport AutoIcon from \"@mr-hope/vuepress-shared-utils/icons/AutoIcon.vue\";\nimport DarkIcon from \"@mr-hope/vuepress-shared-utils/icons/DarkIcon.vue\";\nimport LightIcon from \"@mr-hope/vuepress-shared-utils/icons/LightIcon.vue\";\nimport { dom } from \"@mr-hope/vuepress-shared-utils\";\n\nconst changeClass = (domClass: DOMTokenList, insert: string[], remove: string[]) => {\n  domClass.remove(...remove);\n  const oldClasses = Array.from(domClass);\n  domClass.value = \"\";\n  domClass.add(...insert, ...oldClasses);\n};\n\n@Component({ components: { AutoIcon, DarkIcon, LightIcon } })\nexport default class DarkmodeSwitch extends Vue {\n  private darkmode: \"auto\" | \"on\" | \"off\" = \"auto\";\n\n  /** darkmode status */\n  private get darkmodeConfig() {\n    return this.$themeConfig.darkmode || \"auto-switch\";\n  }\n\n  private mounted() {\n    /** 获得类列表 */\n    const classes = document.body.classList;\n    /** 深色模式 */\n    this.darkmode =\n      (localStorage.getItem(\"darkmode\") as \"auto\" | \"on\" | \"off\" | null) ||\n      \"auto\";\n\n    if (this.darkmodeConfig === \"auto-switch\")\n      if (this.darkmode === \"auto\") this.setDarkmode(\"auto\");\n      else this.setDarkmode(this.darkmode);\n    // 自动模式\n    else if (this.darkmodeConfig === \"auto\") this.setDarkmode(\"auto\");\n    // 切换模式\n    else if (this.darkmodeConfig === \"switch\") this.setDarkmode(this.darkmode);\n    // 被禁用\n    else this.setDarkmode(\"off\");\n  }\n\n  /** 设置夜间模式 */\n  setDarkmode(status: \"on\" | \"off\" | \"auto\") {\n    if (status === \"on\") this.toggleDarkmode(true);\n    else if (status === \"off\") this.toggleDarkmode(false);\n    else {\n      const isDarkMode = window.matchMedia(\"(prefers-color-scheme: dark)\")\n        .matches;\n      const isLightMode = window.matchMedia(\"(prefers-color-scheme: light)\")\n        .matches;\n\n      window.matchMedia(\"(prefers-color-scheme: dark)\").addListener((event) => {\n        if (event.matches) this.toggleDarkmode(true);\n      });\n\n      window\n        .matchMedia(\"(prefers-color-scheme: light)\")\n        .addListener((event) => {\n          if (event.matches) this.toggleDarkmode(false);\n        });\n\n      if (isDarkMode) this.toggleDarkmode(true);\n      else if (isLightMode) this.toggleDarkmode(false);\n      else {\n        const timeHour = new Date().getHours();\n\n        this.toggleDarkmode(timeHour < 6 || timeHour >= 18);\n      }\n    }\n\n    this.darkmode = status;\n    localStorage.setItem(\"darkmode\", status);\n  }\n\n  /** 切换深色模式 */\n  private toggleDarkmode(isDarkmode: boolean) {\n    const classes = document.body.classList;\n\n    if (isDarkmode) changeClass(classes, [\"theme-dark\"], [\"theme-light\"]);\n    else changeClass(classes, [\"theme-light\"], [\"theme-dark\"]);\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.darkmode-switch\n  display flex\n  height 22px\n\n  &:hover\n    cursor pointer\n\n  .item\n    padding 2px\n    border 1px solid $accentColor\n    border-left none\n    line-height 1\n\n    &:first-child\n      border-left 1px solid $accentColor\n\n    &.day\n      border-top-left-radius 4px\n      border-bottom-left-radius 4px\n\n    &.night\n      border-top-right-radius 4px\n      border-bottom-right-radius 4px\n\n    .icon\n      width 16px\n      height 16px\n      color $accentColor\n\n    &.active\n      background-color $accentColor\n\n      &:hover\n        cursor default\n\n      .icon\n        color var(--white)\n\n@keyframes starry_star\n  50%\n    background-color rgba(255, 255, 255, 0.1)\n    box-shadow #fff 7.5px -0.75px 0 0, #fff 3px 2.5px 0 -0.25px, rgba(255, 255, 255, 0.1) 9.5px 4.5px 0 0.25px, #fff 8px 8.5px 0 0, rgba(255, 255, 255, 0.1) 5px 6px 0 -0.375px, #fff 1.25px 9.5px 0 0.25px\n\n@keyframes bounceIn\n  0%\n    opacity 0\n    transform scale(0.3)\n\n  50%\n    opacity 100\n    transform scale(1.1)\n\n  55%\n    transform scale(1.1)\n\n  75%\n    transform scale(0.9)\n\n  100%\n    opacity 100\n    transform scale(1)\n\n.switch\n  display block\n  text-align center\n  user-select none\n\n  .label\n    display block\n    margin 0 auto\n    font-size 1.4em\n    transition all 350ms ease-in\n    position relative\n    height 17.5px\n    width 31.25px\n    border-radius 17.5px\n    border 1px solid #1c1c1c\n    background-color #3c4145\n    transition all 250ms ease-in\n\n    &:hover\n      cursor pointer\n\n    &:before\n      content ''\n      display block\n      position absolute\n      top 0.5px\n      left 1px\n      width 14px\n      height 14px\n      border-radius 50%\n      background-color #fff\n      border 1.25px solid #e3e3c7\n      transition all 250ms ease-in\n\n    &:after\n      content ''\n      display block\n      position absolute\n      top 62%\n      left 9.75px\n      z-index 10\n      width 2.8px\n      height 2.8px\n      opacity 0\n      background-color #fff\n      border-radius 50%\n      box-shadow #fff 0 0, #fff 0.75px 0, #fff 1.5px 0, #fff 2.25px 0, #fff 2.75px 0, #fff 3.5px 0, #fff 4px 0, #fff 5.25px -0.25px 0 0.25px, #fff 4px -1.75px 0 -0.5px, #fff 1.75px -1.75px 0 0.25px, #d3d3d3 0 0 0 1px, #d3d3d3 1.5px 0 0 1px, #d3d3d3 2.75px 0 0 1px, #d3d3d3 4px 0 0 1px, #d3d3d3 5.25px -0.25px 0 1.25px, #d3d3d3 4px -1.75px 0 0.25px, #d3d3d3 1.75px -1.75px 0 1.25px\n      transition opacity 100ms ease-in\n\n    .label-content\n      display block\n      position absolute\n      top 2.25px\n      left 52.5%\n      z-index 20\n      width 1px\n      height 1px\n      border-radius 50%\n      background-color #fff\n      box-shadow rgba(255, 255, 255, 0.1) 7.5px -0.75px 0 0, rgba(255, 255, 255, 0.1) 3px 2.5px 0 -0.25px, #fff 9.5px 4.5px 0 0.25px, rgba(255, 255, 255, 0.1) 8px 8.5px 0 0, #fff 5px 6px 0 0.375px, rgba(255, 255, 255, 0.1) 1.25px 9.5px 0 0.25px\n      animation starry_star 5s ease-in-out infinite\n      transition all 250ms ease-in\n\n      &:before\n        content ''\n        display block\n        position absolute\n        top -0.5px\n        left -6.25px\n        width 4.5px\n        height 4.5px\n        background-color #fff\n        border-radius 50%\n        border 1.25px solid #e3e3c7\n        box-shadow #e3e3c7 -7px 0 0 -0.75px, #e3e3c7 -2px 6px 0 -0.5px\n        transform-origin -1.5px 130%\n        transition all 250ms ease-in\n\n  .switch-input\n    display none\n    transition all 250ms ease-in\n\n    &:checked + .label\n      background-color #9ee3fb\n      border 1px solid #86c3d7\n\n      &:before\n        left 13.75px\n        background-color #ffdf6d\n        border 1.25px solid #e1c348\n\n      &:after\n        opacity 100\n        animation bounceIn 0.6s ease-in-out 0.1s\n        animation-fill-mode backwards\n\n      & > .label-content\n        opacity 0\n        box-shadow rgba(255, 255, 255, 0.1) 7.5px -0.75px 0 -1px, rgba(255, 255, 255, 0.1) 3px 2.5px 0 -1.25px, #fff 9.5px 4.5px 0 -0.75px, rgba(255, 255, 255, 0.1) 8px 8.5px 0 -1px, #fff 5px 6px 0 -1.375px, rgba(255, 255, 255, 0.1) 1.25px 9.5px 0 -0.75px\n        animation none\n\n        &:before\n          left 6.25px\n          transform rotate(70deg)\n</style>"]}]}